$(function(){var t=document.getElementById("canvas"),i=t.getContext("2d"),n=t.width=200,e=t.height=300,s=[],a=!1,o=function(t,i){return Math.floor(Math.random()*(i-t+1)+t)},r=function(){this.reset()};r.prototype.reset=function(){this.startRadius=this.radius=o(4,18),this.x=n/3+(o(1,6)-3),this.y=250,this.vx=this.vy=0,this.hue=o(2,55),this.saturation=o(100,40),this.lightness=o(25,50),this.startAlpha=o(12,8)/100,this.alpha=this.startAlpha,this.decayRate=.12,this.startLife=this.life=11,this.lineWidth=o(12,90)},r.prototype.update=function(){this.vx+=(o(0,270)-100)/1e3,this.vy-=this.life/100,this.x+=this.vx,this.y+=this.vy,this.alpha=this.startAlpha*(this.life/this.startLife),this.radius=this.startRadius*(this.life/this.startLife),this.life-=this.decayRate,(this.x>n+this.radius||this.x<-this.radius||this.y>e+this.radius||this.y<-this.radius||this.life<=this.decayRate)&&this.reset()},r.prototype.render=function(){i.beginPath(),i.arc(this.x,this.y,this.radius,0,2*Math.PI,!1),i.fillStyle=i.strokeStyle="hsla("+this.hue+", "+this.saturation+"%, "+this.lightness+"%, "+this.alpha+")",i.lineWidth=this.lineWidth,i.fill(),i.stroke()};var l=function(){a||(s.length>90?a=!0:s.push(new r))},h=function(){for(var t=s.length;t--;)s[t].update()},u=function(){for(var t=s.length;t--;)s[t].render()},d=function(){i.globalCompositeOperation="destination-out",i.fillStyle="hsla(0, 0%, 0%, .3)",i.fillRect(0,0,n,e),i.globalCompositeOperation="lighter"},c=function(){window.requestAnimFrame(c,t),d(),l(),h(),u()};window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}}(),c(),$(".spinner .btn:first-of-type").on("click",function(){var t=$(this),i=t.closest(".spinner").find("input");void 0==i.attr("max")||parseInt(i.val())<parseInt(i.attr("max"))?i.val(parseInt(i.val(),10)+1):t.next("disabled",!0)}),$(".spinner .btn:last-of-type").on("click",function(){var t=$(this),i=t.closest(".spinner").find("input");void 0==i.attr("min")||parseInt(i.val())>parseInt(i.attr("min"))?i.val(parseInt(i.val(),10)-1):t.prev("disabled",!0)}),$(document).ready(function(){setInterval(function(){$("#shoulder>span").addClass("blink_on"),setTimeout(function(){$("#shoulder>span").removeClass("blink_on")},1900)},6500)}),$(document).ready(function(){setInterval(function(){$("#arm>span").addClass("blink_on"),setTimeout(function(){$("#arm>span").removeClass("blink_on")},1500)},5e3)}),$("#foo").bind("click",function(){var t=document.getElementById("gamesQuantityInput"),i=document.getElementById("amountOfBonusPoints").innerHTML,n=t.value,e=50*n;if(e<=i){var s=n;$(".available-games").text(s);var i=i-e;$("#amountOfBonusPoints").text(i)}else alert("Извини, но на твоём счету недостаточно средств :(");if(s>=1){document.getElementById("playButton");$("#playButton").css("background","url(/img/button-gold-all.png)"),$("#playButton").css("padding","14px 58px"),$("#playButton").css("cursor","pointer"),$(".gnom-text").text("Отличная работа! Теперь можешь приступать к поиску сокровищ!")}}),$(".chest-closed").bind("click",function(){$(".chest-closed").addClass("active-chest"),setTimeout(function(){$(".active-chest").css("background","url(/img/sunduk-open-full-small.png)")},35)})});